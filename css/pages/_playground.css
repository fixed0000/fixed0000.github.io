/* css/pages/playground.css */
/* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ò–≥—Ä–æ–≤–æ–π –ø–ª–æ—â–∞–¥–∫–∏ */

/* --- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã --- */
.playground-page {
    max-width: var(--container-width-xl, 1400px); /* –ú–æ–∂–Ω–æ —à–∏—Ä–µ –¥–ª—è –∏–≥—Ä—ã */
    margin: 0 auto;
    padding: var(--spacing-medium, 20px) var(--spacing-medium, 20px) var(--spacing-large, 40px);
    /* position: relative; */ /* –£–±—Ä–∞–ª–∏, –µ—Å–ª–∏ —Ñ–æ–Ω –Ω–µ –Ω—É–∂–µ–Ω */
    /* overflow: hidden; */
}

/* --- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã --- */
.playground-header {
    text-align: center;
    margin-bottom: var(--spacing-xl, 50px);
    padding: var(--spacing-medium, 20px) 0;
    border-bottom: 1px solid var(--border-color-subtle, #eee);
}
.playground-header h1 {
    color: var(--accent-color);
    margin-bottom: var(--spacing-small, 10px);
}
.playground-header p {
    color: var(--text-muted, inherit);
    max-width: 700px;
    margin: 0 auto;
    line-height: 1.6;
}
[data-theme="dark"] .playground-header {
    border-bottom-color: var(--dark-border-subtle, #333);
}

/* --- –°–µ–∫—Ü–∏—è –î–µ–º–æ –ò–≥—Ä—ã (#game-demo) --- */
#game-demo {
    /* –°—Ç–∏–ª–∏ .highlight-box –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∏–∑ CSS –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ */
    padding: var(--spacing-large, 30px);
    margin-bottom: var(--spacing-xl, 50px);
}
#game-demo h2 {
    text-align: center;
    margin-top: 0;
    margin-bottom: var(--spacing-small, 15px);
    font-size: 1.6em;
}
#game-demo > p { /* –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–¥ –∑–∞–≥–æ–ª–æ–≤–∫–æ–º */
    text-align: center;
    max-width: 700px;
    margin: 0 auto var(--spacing-large, 30px) auto;
    color: var(--text-muted, inherit);
    font-size: 0.95em;
    line-height: 1.6;
}

/* --- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ò–≥—Ä—ã --- */
.game-container {
    display: flex;
    flex-wrap: wrap; /* –ü–∞–Ω–µ–ª—å –≤–Ω–∏–∑ –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
    gap: var(--spacing-large, 30px);
    justify-content: center;
    align-items: flex-start;
    margin-top: 20px;
}

/* --- –ò–≥—Ä–æ–≤–∞—è –°–µ—Ç–∫–∞ --- */
.game-grid {
    display: grid;
    /* –ö–æ–ª–æ–Ω–∫–∏ –∏ —Å—Ç—Ä–æ–∫–∏ –±—É–¥—É—Ç –∑–∞–¥–∞–Ω—ã —á–µ—Ä–µ–∑ JS –∫–∞–∫ inline style –∏–ª–∏ —á–µ—Ä–µ–∑ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ */
    /* –ü—Ä–∏–º–µ—Ä: grid-template-columns: repeat(var(--grid-cols, 10), var(--cell-size, 40px)); */
    /*         grid-template-rows: repeat(var(--grid-rows, 10), var(--cell-size, 40px)); */
    gap: 1px; /* –¢–æ–Ω–∫–∏–π –∑–∞–∑–æ—Ä */
    border: 2px solid var(--border-color-darker, #bbb); /* –ë–æ–ª–µ–µ –∑–∞–º–µ—Ç–Ω–∞—è —Ä–∞–º–∫–∞ */
    background-color: var(--border-color-subtle, #ddd); /* –§–æ–Ω –∑–∞–∑–æ—Ä–æ–≤ */
    width: fit-content;
    margin: 0 auto; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –µ—Å–ª–∏ –ø–∞–Ω–µ–ª—å —Å–Ω–∏–∑—É */
    box-shadow: var(--shadow-sm);
    user-select: none; /* –ó–∞–ø—Ä–µ—Ç–∏—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –ø–æ–ª–µ */
}
[data-theme="dark"] .game-grid {
    border-color: #666;
    background-color: #333;
}

/* --- –Ø—á–µ–π–∫–∞ –°–µ—Ç–∫–∏ --- */
.grid-cell {
    width: var(--cell-size, 40px); /* –†–∞–∑–º–µ—Ä —è—á–µ–π–∫–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é */
    height: var(--cell-size, 40px);
    background-color: var(--bg-color-subtle, #fdfdfd);
    border: 1px solid var(--border-color-extra-subtle, #eee);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.6em; /* –†–∞–∑–º–µ—Ä –∏–∫–æ–Ω–æ–∫/—ç–º–æ–¥–∑–∏ —é–Ω–∏—Ç–æ–≤ */
    cursor: pointer;
    transition: background-color 0.15s ease-out, transform 0.1s ease-out;
    position: relative;
    box-sizing: border-box; /* –£—á–∏—Ç—ã–≤–∞–µ–º —Ä–∞–º–∫—É –≤ —Ä–∞–∑–º–µ—Ä–µ */
}
[data-theme="dark"] .grid-cell {
    background-color: var(--dark-bg-subtle, #3a3a3a);
    border-color: #4a4a4a;
}

/* –¢–∏–ø—ã –ú–µ—Å—Ç–Ω–æ—Å—Ç–∏ */
.grid-cell.terrain-grass { background-color: #a3d9a5; }
.grid-cell.terrain-forest { background-color: #5f9e62; }
.grid-cell.terrain-water { background-color: #a4cee0; cursor: not-allowed; }
.grid-cell.terrain-mountain { background-color: #b0a8a0; cursor: not-allowed; }
.grid-cell.terrain-sand { background-color: #f2dcb3; }
[data-theme="dark"] .grid-cell.terrain-grass { background-color: #4a7a4c; }
[data-theme="dark"] .grid-cell.terrain-forest { background-color: #3a683c; }
[data-theme="dark"] .grid-cell.terrain-water { background-color: #5e8090; }
[data-theme="dark"] .grid-cell.terrain-mountain { background-color: #706c66; }
[data-theme="dark"] .grid-cell.terrain-sand { background-color: #bfa988; }

/* –û–±—ä–µ–∫—Ç—ã –∏ –Æ–Ω–∏—Ç—ã (–∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Å–µ–≤–¥–æ—ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è —ç–º–æ–¥–∑–∏/–∏–∫–æ–Ω–æ–∫) */
.grid-cell [class^="object-"]::before,
.grid-cell [class^="unit-"]::before {
    display: block;
    line-height: 1;
    text-shadow: 0 1px 2px rgba(0,0,0,0.2);
}
.grid-cell.object-resource-gold::before { content: 'üí∞'; }
.grid-cell.object-resource-wood::before { content: 'ü™µ'; }
.grid-cell.object-city::before { content: 'üè∞'; font-size: 1.2em; }
.grid-cell.object-quest::before { content: '‚ùì'; font-size: 1.2em; color: orange; }
.grid-cell.object-enemy-weak::before { content: 'üëπ'; }
.grid-cell.object-enemy-strong::before { content: 'üê≤'; font-size: 1.3em; }
.grid-cell.unit-hero::before { content: 'ü¶∏'; }

/* –°–æ—Å—Ç–æ—è–Ω–∏—è —è—á–µ–µ–∫ */
.grid-cell.selected {
    outline: 3px solid var(--accent-color);
    outline-offset: -2px;
    z-index: 1;
    transform: scale(1.05);
    box-shadow: 0 0 8px var(--accent-color);
}
.grid-cell.possible-move {
    background-color: hsla(120, 73%, 74%, 0.4); /* –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –∑–µ–ª–µ–Ω—ã–π */
    outline: 1px dashed hsla(120, 73%, 44%, 0.6);
    outline-offset: -1px;
    cursor: pointer;
}
.grid-cell.path-highlight { /* –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ø—É—Ç–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) */
    background-color: hsla(50, 100%, 80%, 0.4);
}
.grid-cell:hover:not([class*="terrain-water"]):not([class*="terrain-mountain"]) {
   background-color: rgba(0, 0, 0, 0.05);
}
[data-theme="dark"] .grid-cell.possible-move { background-color: hsla(120, 50%, 30%, 0.5); outline-color: hsla(120, 50%, 60%, 0.7); }
[data-theme="dark"] .grid-cell.path-highlight { background-color: hsla(50, 70%, 40%, 0.4); }
[data-theme="dark"] .grid-cell:hover:not([class*="terrain-water"]):not([class*="terrain-mountain"]) { background-color: rgba(255, 255, 255, 0.08); }


/* --- –ü–∞–Ω–µ–ª—å –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è --- */
.game-controls {
    min-width: 250px; /* –®–∏—Ä–∏–Ω–∞ –ø–∞–Ω–µ–ª–∏ */
    max-width: 300px;
    flex-shrink: 0; /* –ù–µ —Å–∂–∏–º–∞—Ç—å */
    padding: var(--spacing-medium, 20px);
    background-color: var(--card-bg-subtle, #f9f9f9);
    border: 1px solid var(--border-color, #ddd);
    border-radius: 8px;
}
[data-theme="dark"] .game-controls {
    background-color: var(--card-bg);
    border-color: var(--dark-border, #444);
}
.game-controls h3, .game-controls h4 { /* –û—Ç—Å—Ç—É–ø—ã –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –ø–∞–Ω–µ–ª–∏ */
    margin-top: 20px;
    margin-bottom: 10px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--border-color-subtle, #eee);
}
.game-controls h3:first-of-type, .game-controls h4:first-of-type {
    margin-top: 0;
    border-top: none;
    padding-top: 0;
}
[data-theme="dark"] .game-controls h3, [data-theme="dark"] .game-controls h4 {
    border-bottom-color: var(--dark-border-subtle, #333);
}

#heroInfo p, #resourceInfo p { margin-bottom: 8px; display: flex; align-items: center; gap: 5px; }
#heroInfo strong, #resourceInfo strong span[data-i18n] { font-weight: 600; }
.resource-icon { font-size: 1.1em; display: inline-block; width: 1.5em; text-align: center; }

.game-log {
    height: 120px; /* –£–≤–µ–ª–∏—á–∏–ª–∏ –≤—ã—Å–æ—Ç—É –ª–æ–≥–∞ */
    overflow-y: auto;
    border: 1px solid var(--border-color-extra-subtle, #eee);
    padding: 10px;
    font-size: 0.85em;
    background: var(--bg-color, white);
    border-radius: 4px;
    margin-bottom: 15px;
}
.game-log p { margin: 0 0 5px 0; line-height: 1.4; }
.game-log p:last-child { margin-bottom: 0; }
[data-theme="dark"] .game-log { border-color: #444; background: #222; }

.game-controls button { display: block; width: 100%; margin-top: 10px; }


/* --- –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ --- */
.tech-used { text-align: center; font-size: 0.9em; color: var(--text-muted); margin-top: 25px; }
.tech-used strong { color: var(--text-base); }


/* --- –ú–æ–¥–∞–ª—å–Ω–æ–µ –û–∫–Ω–æ --- */
.modal { display: none; position: fixed; z-index: 1001; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.6); animation: fadeIn 0.3s ease-out; }
.modal-content { background-color: var(--card-bg, #fff); margin: 10% auto; /* –£–º–µ–Ω—å—à–∏–ª–∏ –æ—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É */ padding: 25px 30px; border: 1px solid var(--border-color, #888); width: 90%; max-width: 450px; /* –ß—É—Ç—å —É–∂–µ */ border-radius: 8px; position: relative; box-shadow: var(--shadow-large); animation: slideInModal 0.4s ease-out; }
[data-theme="dark"] .modal-content { background-color: var(--dark-bg-subtle); border-color: #555; }
.modal-close { color: #aaa; position: absolute; top: 10px; right: 20px; font-size: 28px; font-weight: bold; line-height: 1; cursor: pointer; }
.modal-close:hover, .modal-close:focus { color: #333; text-decoration: none; }
[data-theme="dark"] .modal-close:hover, [data-theme="dark"] .modal-close:focus { color: #ccc; }
#modalTitle { margin-top: 0; margin-bottom: 20px; color: var(--accent-color); }
#modalBody p { margin-bottom: 15px; line-height: 1.6; }
#modalActions { margin-top: 25px; text-align: right; display: flex; justify-content: flex-end; gap: 10px; }
#modalActions button { /* –°—Ç–∏–ª–∏ –∫–Ω–æ–ø–æ–∫ btn –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è */ }

/* –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –º–æ–¥–∞–ª–∫–∏ */
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes slideInModal { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }


/* --- –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å --- */
@media (max-width: 768px) {
    .game-container { flex-direction: column; align-items: center; }
    .game-controls { width: 100%; max-width: 400px; /* –û–≥—Ä–∞–Ω–∏—á–∏–º —à–∏—Ä–∏–Ω—É –ø–∞–Ω–µ–ª–∏ */ }
    /* –£–º–µ–Ω—å—à–∞–µ–º —è—á–µ–π–∫–∏ –¥–ª—è –ø–ª–∞–Ω—à–µ—Ç–æ–≤ */
    .game-grid { --cell-size: 35px; /* –ú–µ–Ω—è–µ–º —Ä–∞–∑–º–µ—Ä —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é */ }
    .grid-cell { width: var(--cell-size); height: var(--cell-size); font-size: 1.4em;}
}

@media (max-width: 480px) {
    .playground-header h1 { font-size: 1.8em; }
    #game-demo h2 { font-size: 1.4em; }
    /* –°–∏–ª—å–Ω–æ —É–º–µ–Ω—å—à–∞–µ–º —è—á–µ–π–∫–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
    .game-grid { --cell-size: 28px; }
    .grid-cell { width: var(--cell-size); height: var(--cell-size); font-size: 1.1em;}
    .game-controls { min-width: auto; }
    .modal-content { width: 95%; margin: 10% auto; padding: 20px; }
    #modalTitle { font-size: 1.2em; }
}

/* --- –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å: –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–π --- */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; scroll-behavior: auto !important; }
  .animate-on-scroll { opacity: 1 !important; transform: none !important; transition: none !important; }
  .modal { animation: none !important; }
  .modal-content { animation: none !important; }
  /* –î–æ–±–∞–≤—å—Ç–µ —Å—é–¥–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –¥—Ä—É–≥–∏—Ö –∞–Ω–∏–º–∞—Ü–∏–π, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å */
}